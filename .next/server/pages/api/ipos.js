"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/ipos";
exports.ids = ["pages/api/ipos"];
exports.modules = {

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "redis":
/*!************************!*\
  !*** external "redis" ***!
  \************************/
/***/ ((module) => {

module.exports = require("redis");

/***/ }),

/***/ "v8":
/*!*********************!*\
  !*** external "v8" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("v8");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fipos&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fipos%2Findex.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fipos&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fipos%2Findex.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_ipos_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/ipos/index.js */ \"(api)/./pages/api/ipos/index.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_ipos_index_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_ipos_index_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/ipos\",\n        pathname: \"/api/ipos\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_ipos_index_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmlwb3MmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmlwb3MlMkZpbmRleC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNzRDtBQUN0RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMscURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHFEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2lwby1zY3JhcGVyLz8wMjQyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvaXBvcy9pbmRleC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2lwb3NcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9pcG9zXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fipos&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fipos%2Findex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./config/database.js":
/*!****************************!*\
  !*** ./config/database.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\n(__webpack_require__(/*! dotenv */ \"dotenv\").config)();\n// Database connection URI\nconst MONGODB_URI = \"mongodb+srv://geekvb:Shifts323212@ipo.jbjkmyh.mongodb.net/ipo\" || 0;\n// Track connection status\nlet isConnected = false;\n// Connection options\nconst options = {\n    useNewUrlParser: true,\n    useUnifiedTopology: true,\n    serverSelectionTimeoutMS: 5000,\n    maxPoolSize: parseInt(process.env.DB_POOL_SIZE || \"10\", 10),\n    socketTimeoutMS: 45000,\n    family: 4 // Use IPv4, skip trying IPv6\n};\n// Connect to MongoDB\nasync function connectToDatabase() {\n    // If we're already connected, return the existing connection\n    if (isConnected) {\n        console.log(\"Using existing MongoDB connection\");\n        return mongoose.connection;\n    }\n    try {\n        // Set up event listeners for connection\n        mongoose.connection.on(\"connected\", ()=>{\n            isConnected = true;\n            console.log(\"MongoDB connected successfully\");\n        });\n        mongoose.connection.on(\"error\", (err)=>{\n            console.error(\"MongoDB connection error:\", err);\n            isConnected = false;\n        });\n        mongoose.connection.on(\"disconnected\", ()=>{\n            console.log(\"MongoDB disconnected\");\n            isConnected = false;\n        });\n        // Connect to the database\n        await mongoose.connect(MONGODB_URI, options);\n        isConnected = true;\n        return mongoose.connection;\n    } catch (error) {\n        console.error(\"MongoDB connection error:\", error);\n        isConnected = false;\n        // Don't exit the process, let the calling code handle it\n        throw error;\n    }\n}\n// Disconnect from MongoDB\nasync function disconnectFromDatabase() {\n    if (!isConnected) {\n        console.log(\"No MongoDB connection to disconnect\");\n        return;\n    }\n    try {\n        await mongoose.disconnect();\n        isConnected = false;\n        console.log(\"Disconnected from MongoDB\");\n    } catch (error) {\n        console.error(\"Error disconnecting from MongoDB:\", error);\n    }\n}\nmodule.exports = {\n    connectToDatabase,\n    disconnectFromDatabase,\n    connection: mongoose.connection,\n    isConnected: ()=>isConnected\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9jb25maWcvZGF0YWJhc2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLFdBQVdDLG1CQUFPQSxDQUFDO0FBQ3pCQSxvREFBd0I7QUFFeEIsMEJBQTBCO0FBQzFCLE1BQU1FLGNBQWNDLCtEQUF1QixJQUFJO0FBRS9DLDBCQUEwQjtBQUMxQixJQUFJRSxjQUFjO0FBRWxCLHFCQUFxQjtBQUNyQixNQUFNQyxVQUFVO0lBQ2RDLGlCQUFpQjtJQUNqQkMsb0JBQW9CO0lBQ3BCQywwQkFBMEI7SUFDMUJDLGFBQWFDLFNBQVNSLFFBQVFDLEdBQUcsQ0FBQ1EsWUFBWSxJQUFJLE1BQU07SUFDeERDLGlCQUFpQjtJQUNqQkMsUUFBUSxFQUFFLDZCQUE2QjtBQUN6QztBQUVBLHFCQUFxQjtBQUNyQixlQUFlQztJQUNiLDZEQUE2RDtJQUM3RCxJQUFJVixhQUFhO1FBQ2ZXLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU9sQixTQUFTbUIsVUFBVTtJQUM1QjtJQUVBLElBQUk7UUFDRix3Q0FBd0M7UUFDeENuQixTQUFTbUIsVUFBVSxDQUFDQyxFQUFFLENBQUMsYUFBYTtZQUNsQ2QsY0FBYztZQUNkVyxRQUFRQyxHQUFHLENBQUM7UUFDZDtRQUVBbEIsU0FBU21CLFVBQVUsQ0FBQ0MsRUFBRSxDQUFDLFNBQVMsQ0FBQ0M7WUFDL0JKLFFBQVFLLEtBQUssQ0FBQyw2QkFBNkJEO1lBQzNDZixjQUFjO1FBQ2hCO1FBRUFOLFNBQVNtQixVQUFVLENBQUNDLEVBQUUsQ0FBQyxnQkFBZ0I7WUFDckNILFFBQVFDLEdBQUcsQ0FBQztZQUNaWixjQUFjO1FBQ2hCO1FBRUEsMEJBQTBCO1FBQzFCLE1BQU1OLFNBQVN1QixPQUFPLENBQUNwQixhQUFhSTtRQUNwQ0QsY0FBYztRQUNkLE9BQU9OLFNBQVNtQixVQUFVO0lBQzVCLEVBQUUsT0FBT0csT0FBTztRQUNkTCxRQUFRSyxLQUFLLENBQUMsNkJBQTZCQTtRQUMzQ2hCLGNBQWM7UUFDZCx5REFBeUQ7UUFDekQsTUFBTWdCO0lBQ1I7QUFDRjtBQUVBLDBCQUEwQjtBQUMxQixlQUFlRTtJQUNiLElBQUksQ0FBQ2xCLGFBQWE7UUFDaEJXLFFBQVFDLEdBQUcsQ0FBQztRQUNaO0lBQ0Y7SUFFQSxJQUFJO1FBQ0YsTUFBTWxCLFNBQVN5QixVQUFVO1FBQ3pCbkIsY0FBYztRQUNkVyxRQUFRQyxHQUFHLENBQUM7SUFDZCxFQUFFLE9BQU9JLE9BQU87UUFDZEwsUUFBUUssS0FBSyxDQUFDLHFDQUFxQ0E7SUFDckQ7QUFDRjtBQUVBSSxPQUFPQyxPQUFPLEdBQUc7SUFDZlg7SUFDQVE7SUFDQUwsWUFBWW5CLFNBQVNtQixVQUFVO0lBQy9CYixhQUFhLElBQU1BO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaXBvLXNjcmFwZXIvLi9jb25maWcvZGF0YWJhc2UuanM/NjkyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcblxuLy8gRGF0YWJhc2UgY29ubmVjdGlvbiBVUklcbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgfHwgJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvaXBvX2RhdGEnO1xuXG4vLyBUcmFjayBjb25uZWN0aW9uIHN0YXR1c1xubGV0IGlzQ29ubmVjdGVkID0gZmFsc2U7XG5cbi8vIENvbm5lY3Rpb24gb3B0aW9uc1xuY29uc3Qgb3B0aW9ucyA9IHtcbiAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxuICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXG4gIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogNTAwMCwgLy8gVGltZW91dCBhZnRlciA1c1xuICBtYXhQb29sU2l6ZTogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9PTF9TSVpFIHx8ICcxMCcsIDEwKSwgLy8gQ29ubmVjdGlvbiBwb29saW5nXG4gIHNvY2tldFRpbWVvdXRNUzogNDUwMDAsIC8vIENsb3NlIHNvY2tldHMgYWZ0ZXIgNDVzXG4gIGZhbWlseTogNCAvLyBVc2UgSVB2NCwgc2tpcCB0cnlpbmcgSVB2NlxufTtcblxuLy8gQ29ubmVjdCB0byBNb25nb0RCXG5hc3luYyBmdW5jdGlvbiBjb25uZWN0VG9EYXRhYmFzZSgpIHtcbiAgLy8gSWYgd2UncmUgYWxyZWFkeSBjb25uZWN0ZWQsIHJldHVybiB0aGUgZXhpc3RpbmcgY29ubmVjdGlvblxuICBpZiAoaXNDb25uZWN0ZWQpIHtcbiAgICBjb25zb2xlLmxvZygnVXNpbmcgZXhpc3RpbmcgTW9uZ29EQiBjb25uZWN0aW9uJyk7XG4gICAgcmV0dXJuIG1vbmdvb3NlLmNvbm5lY3Rpb247XG4gIH1cblxuICB0cnkge1xuICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnMgZm9yIGNvbm5lY3Rpb25cbiAgICBtb25nb29zZS5jb25uZWN0aW9uLm9uKCdjb25uZWN0ZWQnLCAoKSA9PiB7XG4gICAgICBpc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSk7XG5cbiAgICBtb25nb29zZS5jb25uZWN0aW9uLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIgY29ubmVjdGlvbiBlcnJvcjonLCBlcnIpO1xuICAgICAgaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB9KTtcblxuICAgIG1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Rpc2Nvbm5lY3RlZCcsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdNb25nb0RCIGRpc2Nvbm5lY3RlZCcpO1xuICAgICAgaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB9KTtcblxuICAgIC8vIENvbm5lY3QgdG8gdGhlIGRhdGFiYXNlXG4gICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSwgb3B0aW9ucyk7XG4gICAgaXNDb25uZWN0ZWQgPSB0cnVlO1xuICAgIHJldHVybiBtb25nb29zZS5jb25uZWN0aW9uO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAvLyBEb24ndCBleGl0IHRoZSBwcm9jZXNzLCBsZXQgdGhlIGNhbGxpbmcgY29kZSBoYW5kbGUgaXRcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBEaXNjb25uZWN0IGZyb20gTW9uZ29EQlxuYXN5bmMgZnVuY3Rpb24gZGlzY29ubmVjdEZyb21EYXRhYmFzZSgpIHtcbiAgaWYgKCFpc0Nvbm5lY3RlZCkge1xuICAgIGNvbnNvbGUubG9nKCdObyBNb25nb0RCIGNvbm5lY3Rpb24gdG8gZGlzY29ubmVjdCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpO1xuICAgIGlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgY29uc29sZS5sb2coJ0Rpc2Nvbm5lY3RlZCBmcm9tIE1vbmdvREInKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkaXNjb25uZWN0aW5nIGZyb20gTW9uZ29EQjonLCBlcnJvcik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbm5lY3RUb0RhdGFiYXNlLFxuICBkaXNjb25uZWN0RnJvbURhdGFiYXNlLFxuICBjb25uZWN0aW9uOiBtb25nb29zZS5jb25uZWN0aW9uLFxuICBpc0Nvbm5lY3RlZDogKCkgPT4gaXNDb25uZWN0ZWRcbn07ICJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJjb25maWciLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJpc0Nvbm5lY3RlZCIsIm9wdGlvbnMiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJtYXhQb29sU2l6ZSIsInBhcnNlSW50IiwiREJfUE9PTF9TSVpFIiwic29ja2V0VGltZW91dE1TIiwiZmFtaWx5IiwiY29ubmVjdFRvRGF0YWJhc2UiLCJjb25zb2xlIiwibG9nIiwiY29ubmVjdGlvbiIsIm9uIiwiZXJyIiwiZXJyb3IiLCJjb25uZWN0IiwiZGlzY29ubmVjdEZyb21EYXRhYmFzZSIsImRpc2Nvbm5lY3QiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./config/database.js\n");

/***/ }),

/***/ "(api)/./models/IpoModel.js":
/*!****************************!*\
  !*** ./models/IpoModel.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\n// Schema for IPO data\nconst ipoSchema = new mongoose.Schema({\n    ipo_id: {\n        type: String,\n        required: true,\n        unique: true,\n        index: true\n    },\n    // Remove any conflicting ipoId field if it exists\n    ipoId: {\n        type: String,\n        select: false // Exclude from queries\n    },\n    ipo_name: {\n        type: String,\n        required: true,\n        index: true\n    },\n    year: {\n        type: Number,\n        required: true,\n        index: true\n    },\n    company_name: {\n        type: String,\n        index: true\n    },\n    source_url: {\n        type: String,\n        required: true\n    },\n    data: {\n        type: Object\n    },\n    opening_date: {\n        type: Date,\n        index: true\n    },\n    closing_date: {\n        type: Date\n    },\n    listing_date: {\n        type: Date\n    },\n    issue_price: {\n        type: String\n    },\n    issue_price_numeric: {\n        type: Number\n    },\n    issue_size: {\n        type: String\n    },\n    issue_size_numeric: {\n        type: Number\n    },\n    lot_size: {\n        type: Number\n    },\n    allotment_status: {\n        type: String\n    },\n    listing_gains: {\n        type: String\n    },\n    listing_gains_numeric: {\n        type: Number,\n        index: true\n    },\n    status: {\n        type: String,\n        enum: [\n            \"upcoming\",\n            \"open\",\n            \"closed\",\n            \"listed\",\n            \"withdrawn\"\n        ],\n        default: \"upcoming\",\n        index: true\n    },\n    scraped_at: {\n        type: Date,\n        default: Date.now\n    },\n    updated_at: {\n        type: Date,\n        default: Date.now\n    },\n    raw_data: {\n        type: Object\n    },\n    logo_url: {\n        type: String\n    }\n}, {\n    timestamps: true,\n    strict: false // Allows flexibility for additional fields\n});\n// Index for efficient searches\nipoSchema.index({\n    ipo_name: \"text\",\n    company_name: \"text\"\n});\n// Middleware to ensure proper ID fields before save\nipoSchema.pre(\"save\", function(next) {\n    // Make sure ipo_id exists and is not null/undefined\n    if (!this.ipo_id) {\n        if (this.ipoId) {\n            this.ipo_id = this.ipoId;\n        } else if (this.year && this.ipo_name) {\n            // Generate an ID if needed\n            const sanitizedName = this.ipo_name.toLowerCase().replace(/[^a-z0-9]/g, \"_\");\n            this.ipo_id = `${this.year}_${sanitizedName}`;\n        } else {\n            return next(new Error(\"Cannot generate ipo_id: missing required fields\"));\n        }\n    }\n    // Remove ipoId to avoid conflicts\n    this.ipoId = undefined;\n    next();\n});\n// Create or update IPO data\nipoSchema.statics.upsertIpo = async function(ipoData) {\n    // Ensure ipo_id exists\n    if (!ipoData.ipo_id) {\n        if (ipoData.ipoId) {\n            ipoData.ipo_id = ipoData.ipoId;\n            delete ipoData.ipoId; // Remove to avoid conflicts\n        } else if (ipoData.year && (ipoData.ipo_name || ipoData.company_name)) {\n            const name = ipoData.ipo_name || ipoData.company_name;\n            const sanitizedName = name.toLowerCase().replace(/[^a-z0-9]/g, \"_\");\n            ipoData.ipo_id = `${ipoData.year}_${sanitizedName}`;\n        } else {\n            throw new Error(\"IPO ID is required for upserting and cannot be generated from available data\");\n        }\n    }\n    // Create a processed version with important fields extracted to top level\n    const processedData = {\n        ...ipoData,\n        company_name: ipoData.metadata?.company_name || ipoData.ipo_name || ipoData.company_name,\n        year: ipoData.metadata?.year || ipoData.year || new Date().getFullYear(),\n        source_url: ipoData._source_url || ipoData.source_url || \"\",\n        scraped_at: new Date(ipoData._scraped_at || Date.now()),\n        updated_at: new Date()\n    };\n    // Prioritize direct date fields first, then check in multiple possible locations\n    processedData.opening_date = parseDate(ipoData.opening_date || ipoData.basicDetails?.ipoOpenDate || ipoData.data?.opening_date || ipoData.data?.issue_opening_date || // Extract from ipoDate format \"January 7, 2025 to January 9, 2025\"\n    (ipoData.basicDetails?.ipoDate ? ipoData.basicDetails.ipoDate.split(\" to \")[0] : null));\n    processedData.closing_date = parseDate(ipoData.closing_date || ipoData.basicDetails?.ipoCloseDate || ipoData.data?.closing_date || ipoData.data?.issue_closing_date || // Extract from ipoDate format \"January 7, 2025 to January 9, 2025\"\n    (ipoData.basicDetails?.ipoDate ? ipoData.basicDetails.ipoDate.split(\" to \")[1] : null));\n    processedData.listing_date = parseDate(ipoData.listing_date || ipoData.basicDetails?.ipoListingDate || ipoData.data?.listing_date);\n    // Extract other key fields\n    processedData.issue_price = ipoData.basicDetails?.issuePrice || ipoData.data?.issue_price || ipoData.data?.price_band || ipoData.issue_price;\n    processedData.issue_size = ipoData.basicDetails?.issueSize || ipoData.data?.issue_size || ipoData.data?.issue_amount || ipoData.issue_size;\n    processedData.lot_size = parseInt(ipoData.basicDetails?.lotSize || ipoData.data?.lot_size || ipoData.lot_size || \"0\", 10) || null;\n    processedData.logo_url = ipoData.logo || null;\n    // Extract numeric values for price and size for aggregation\n    if (processedData.issue_price) {\n        const priceMatch = processedData.issue_price.match(/\\d+(\\.\\d+)?/);\n        processedData.issue_price_numeric = priceMatch ? parseFloat(priceMatch[0]) : null;\n    }\n    if (processedData.issue_size) {\n        const sizeMatch = processedData.issue_size.match(/\\d+(\\.\\d+)?/);\n        processedData.issue_size_numeric = sizeMatch ? parseFloat(sizeMatch[0]) : null;\n    }\n    // Extract listing gains percentage for performance tracking\n    if (processedData.listing_gains) {\n        const gainsMatch = processedData.listing_gains.match(/(-?\\d+(\\.\\d+)?)\\s*%/);\n        processedData.listing_gains_numeric = gainsMatch ? parseFloat(gainsMatch[1]) : null;\n    } else if (ipoData.listingDayTrading && ipoData.listingDayTrading.data) {\n        // Calculate listing gains from listing day trading data\n        const data = ipoData.listingDayTrading.data;\n        const exchange = Object.keys(data.final_issue_price || {})[0];\n        if (exchange && data.final_issue_price[exchange] && data.last_trade[exchange]) {\n            const issuePrice = parseFloat(data.final_issue_price[exchange]);\n            const lastTradePrice = parseFloat(data.last_trade[exchange]);\n            if (!isNaN(issuePrice) && !isNaN(lastTradePrice) && issuePrice > 0) {\n                const listingGain = (lastTradePrice - issuePrice) / issuePrice * 100;\n                processedData.listing_gains = `${listingGain.toFixed(2)}%`;\n                processedData.listing_gains_numeric = parseFloat(listingGain.toFixed(2));\n            }\n        }\n    }\n    // Determine status based on dates\n    processedData.status = determineIpoStatus(processedData);\n    // Upsert the document\n    return this.findOneAndUpdate({\n        ipo_id: processedData.ipo_id\n    }, processedData, {\n        upsert: true,\n        new: true,\n        setDefaultsOnInsert: true\n    });\n};\n// Helper to parse dates\nfunction parseDate(dateStr) {\n    if (!dateStr) return null;\n    try {\n        // Handle different date formats\n        if (typeof dateStr === \"string\") {\n            // Format: \"Tue, Jan 7, 2025\"\n            if (dateStr.includes(\",\")) {\n                return new Date(dateStr);\n            }\n            // Format: \"January 7, 2025\"\n            const parts = dateStr.split(\" \");\n            if (parts.length >= 3) {\n                // Try to parse as is first\n                const date = new Date(dateStr);\n                if (!isNaN(date.getTime())) {\n                    return date;\n                }\n                // Try parsing with just month, day, year\n                const monthIndex = [\n                    \"january\",\n                    \"february\",\n                    \"march\",\n                    \"april\",\n                    \"may\",\n                    \"june\",\n                    \"july\",\n                    \"august\",\n                    \"september\",\n                    \"october\",\n                    \"november\",\n                    \"december\"\n                ].indexOf(parts[0].toLowerCase());\n                if (monthIndex !== -1) {\n                    // Parse day (remove comma if present)\n                    const day = parseInt(parts[1].replace(\",\", \"\"), 10);\n                    // Parse year\n                    const year = parseInt(parts[parts.length - 1], 10);\n                    return new Date(year, monthIndex, day);\n                }\n            }\n        }\n        // Default parsing\n        return new Date(dateStr);\n    } catch (e) {\n        console.error(`Error parsing date: ${dateStr}`, e);\n        return null;\n    }\n}\n// Determine IPO status based on dates\nfunction determineIpoStatus(ipo) {\n    const now = new Date();\n    if (!ipo.opening_date) return \"upcoming\";\n    if (ipo.listing_date && now >= ipo.listing_date) return \"listed\";\n    if (ipo.closing_date && now >= ipo.closing_date) return \"closed\";\n    if (now >= ipo.opening_date) return \"open\";\n    return \"upcoming\";\n}\n// Check if the model already exists to prevent \"OverwriteModelError\"\nconst IpoModel = mongoose.models.Ipo || mongoose.model(\"Ipo\", ipoSchema);\nmodule.exports = IpoModel;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUssQ0FBQyxFQUFFLENBQUNqRCxPQUFPLENBQUMsS0FBSyxLQUFLO29CQUNoRCxhQUFhO29CQUNiLE1BQU1oQyxPQUFPeUQsU0FBU3dCLEtBQUssQ0FBQ0EsTUFBTUMsTUFBTSxHQUFHLEVBQUUsRUFBRTtvQkFFL0MsT0FBTyxJQUFJM0UsS0FBS1AsTUFBTXFGLFlBQVlFO2dCQUNwQztZQUNGO1FBQ0Y7UUFFQSxrQkFBa0I7UUFDbEIsT0FBTyxJQUFJaEYsS0FBS3dFO0lBQ2xCLEVBQUUsT0FBT1MsR0FBRztRQUNWQyxRQUFRQyxLQUFLLENBQUMsQ0FBQyxvQkFBb0IsRUFBRVgsUUFBUSxDQUFDLEVBQUVTO1FBQ2hELE9BQU87SUFDVDtBQUNGO0FBRUEsc0NBQXNDO0FBQ3RDLFNBQVNkLG1CQUFtQmlCLEdBQUc7SUFDN0IsTUFBTXJFLE1BQU0sSUFBSWY7SUFFaEIsSUFBSSxDQUFDb0YsSUFBSXJGLFlBQVksRUFBRSxPQUFPO0lBRTlCLElBQUlxRixJQUFJbEYsWUFBWSxJQUFJYSxPQUFPcUUsSUFBSWxGLFlBQVksRUFBRSxPQUFPO0lBQ3hELElBQUlrRixJQUFJbkYsWUFBWSxJQUFJYyxPQUFPcUUsSUFBSW5GLFlBQVksRUFBRSxPQUFPO0lBQ3hELElBQUljLE9BQU9xRSxJQUFJckYsWUFBWSxFQUFFLE9BQU87SUFFcEMsT0FBTztBQUNUO0FBRUEscUVBQXFFO0FBQ3JFLE1BQU1zRixXQUFXekcsU0FBUzBHLE1BQU0sQ0FBQ0MsR0FBRyxJQUFJM0csU0FBUzRHLEtBQUssQ0FBQyxPQUFPMUc7QUFFOUQyRyxPQUFPQyxPQUFPLEdBQUdMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaXBvLXNjcmFwZXIvLi9tb2RlbHMvSXBvTW9kZWwuanM/MWNjOSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5cbi8vIFNjaGVtYSBmb3IgSVBPIGRhdGFcbmNvbnN0IGlwb1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBpcG9faWQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdW5pcXVlOiB0cnVlLFxuICAgIGluZGV4OiB0cnVlXG4gIH0sXG4gIC8vIFJlbW92ZSBhbnkgY29uZmxpY3RpbmcgaXBvSWQgZmllbGQgaWYgaXQgZXhpc3RzXG4gIGlwb0lkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHNlbGVjdDogZmFsc2UgLy8gRXhjbHVkZSBmcm9tIHF1ZXJpZXNcbiAgfSxcbiAgaXBvX25hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgaW5kZXg6IHRydWVcbiAgfSxcbiAgeWVhcjoge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBpbmRleDogdHJ1ZVxuICB9LFxuICBjb21wYW55X25hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgaW5kZXg6IHRydWVcbiAgfSxcbiAgc291cmNlX3VybDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICBkYXRhOiB7XG4gICAgdHlwZTogT2JqZWN0XG4gIH0sXG4gIG9wZW5pbmdfZGF0ZToge1xuICAgIHR5cGU6IERhdGUsXG4gICAgaW5kZXg6IHRydWVcbiAgfSxcbiAgY2xvc2luZ19kYXRlOiB7XG4gICAgdHlwZTogRGF0ZVxuICB9LFxuICBsaXN0aW5nX2RhdGU6IHtcbiAgICB0eXBlOiBEYXRlXG4gIH0sXG4gIGlzc3VlX3ByaWNlOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIGlzc3VlX3ByaWNlX251bWVyaWM6IHtcbiAgICB0eXBlOiBOdW1iZXJcbiAgfSxcbiAgaXNzdWVfc2l6ZToge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBpc3N1ZV9zaXplX251bWVyaWM6IHtcbiAgICB0eXBlOiBOdW1iZXJcbiAgfSxcbiAgbG90X3NpemU6IHtcbiAgICB0eXBlOiBOdW1iZXJcbiAgfSxcbiAgYWxsb3RtZW50X3N0YXR1czoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBsaXN0aW5nX2dhaW5zOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIGxpc3RpbmdfZ2FpbnNfbnVtZXJpYzoge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICBpbmRleDogdHJ1ZVxuICB9LFxuICBzdGF0dXM6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWyd1cGNvbWluZycsICdvcGVuJywgJ2Nsb3NlZCcsICdsaXN0ZWQnLCAnd2l0aGRyYXduJ10sXG4gICAgZGVmYXVsdDogJ3VwY29taW5nJyxcbiAgICBpbmRleDogdHJ1ZVxuICB9LFxuICBzY3JhcGVkX2F0OiB7XG4gICAgdHlwZTogRGF0ZSxcbiAgICBkZWZhdWx0OiBEYXRlLm5vd1xuICB9LFxuICB1cGRhdGVkX2F0OiB7XG4gICAgdHlwZTogRGF0ZSxcbiAgICBkZWZhdWx0OiBEYXRlLm5vd1xuICB9LFxuICByYXdfZGF0YToge1xuICAgIHR5cGU6IE9iamVjdFxuICB9LFxuICBsb2dvX3VybDoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9XG59LCB7XG4gIHRpbWVzdGFtcHM6IHRydWUsXG4gIHN0cmljdDogZmFsc2UgLy8gQWxsb3dzIGZsZXhpYmlsaXR5IGZvciBhZGRpdGlvbmFsIGZpZWxkc1xufSk7XG5cbi8vIEluZGV4IGZvciBlZmZpY2llbnQgc2VhcmNoZXNcbmlwb1NjaGVtYS5pbmRleCh7IGlwb19uYW1lOiAndGV4dCcsIGNvbXBhbnlfbmFtZTogJ3RleHQnIH0pO1xuXG4vLyBNaWRkbGV3YXJlIHRvIGVuc3VyZSBwcm9wZXIgSUQgZmllbGRzIGJlZm9yZSBzYXZlXG5pcG9TY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24obmV4dCkge1xuICAvLyBNYWtlIHN1cmUgaXBvX2lkIGV4aXN0cyBhbmQgaXMgbm90IG51bGwvdW5kZWZpbmVkXG4gIGlmICghdGhpcy5pcG9faWQpIHtcbiAgICBpZiAodGhpcy5pcG9JZCkge1xuICAgICAgdGhpcy5pcG9faWQgPSB0aGlzLmlwb0lkO1xuICAgIH0gZWxzZSBpZiAodGhpcy55ZWFyICYmIHRoaXMuaXBvX25hbWUpIHtcbiAgICAgIC8vIEdlbmVyYXRlIGFuIElEIGlmIG5lZWRlZFxuICAgICAgY29uc3Qgc2FuaXRpemVkTmFtZSA9IHRoaXMuaXBvX25hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEtejAtOV0vZywgJ18nKTtcbiAgICAgIHRoaXMuaXBvX2lkID0gYCR7dGhpcy55ZWFyfV8ke3Nhbml0aXplZE5hbWV9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdDYW5ub3QgZ2VuZXJhdGUgaXBvX2lkOiBtaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycpKTtcbiAgICB9XG4gIH1cbiAgLy8gUmVtb3ZlIGlwb0lkIHRvIGF2b2lkIGNvbmZsaWN0c1xuICB0aGlzLmlwb0lkID0gdW5kZWZpbmVkO1xuICBcbiAgbmV4dCgpO1xufSk7XG5cbi8vIENyZWF0ZSBvciB1cGRhdGUgSVBPIGRhdGFcbmlwb1NjaGVtYS5zdGF0aWNzLnVwc2VydElwbyA9IGFzeW5jIGZ1bmN0aW9uKGlwb0RhdGEpIHtcbiAgLy8gRW5zdXJlIGlwb19pZCBleGlzdHNcbiAgaWYgKCFpcG9EYXRhLmlwb19pZCkge1xuICAgIGlmIChpcG9EYXRhLmlwb0lkKSB7XG4gICAgICBpcG9EYXRhLmlwb19pZCA9IGlwb0RhdGEuaXBvSWQ7XG4gICAgICBkZWxldGUgaXBvRGF0YS5pcG9JZDsgLy8gUmVtb3ZlIHRvIGF2b2lkIGNvbmZsaWN0c1xuICAgIH0gZWxzZSBpZiAoaXBvRGF0YS55ZWFyICYmIChpcG9EYXRhLmlwb19uYW1lIHx8IGlwb0RhdGEuY29tcGFueV9uYW1lKSkge1xuICAgICAgY29uc3QgbmFtZSA9IGlwb0RhdGEuaXBvX25hbWUgfHwgaXBvRGF0YS5jb21wYW55X25hbWU7XG4gICAgICBjb25zdCBzYW5pdGl6ZWROYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teYS16MC05XS9nLCAnXycpO1xuICAgICAgaXBvRGF0YS5pcG9faWQgPSBgJHtpcG9EYXRhLnllYXJ9XyR7c2FuaXRpemVkTmFtZX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lQTyBJRCBpcyByZXF1aXJlZCBmb3IgdXBzZXJ0aW5nIGFuZCBjYW5ub3QgYmUgZ2VuZXJhdGVkIGZyb20gYXZhaWxhYmxlIGRhdGEnKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIENyZWF0ZSBhIHByb2Nlc3NlZCB2ZXJzaW9uIHdpdGggaW1wb3J0YW50IGZpZWxkcyBleHRyYWN0ZWQgdG8gdG9wIGxldmVsXG4gIGNvbnN0IHByb2Nlc3NlZERhdGEgPSB7XG4gICAgLi4uaXBvRGF0YSxcbiAgICBjb21wYW55X25hbWU6IGlwb0RhdGEubWV0YWRhdGE/LmNvbXBhbnlfbmFtZSB8fCBpcG9EYXRhLmlwb19uYW1lIHx8IGlwb0RhdGEuY29tcGFueV9uYW1lLFxuICAgIHllYXI6IGlwb0RhdGEubWV0YWRhdGE/LnllYXIgfHwgaXBvRGF0YS55ZWFyIHx8IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxcbiAgICBzb3VyY2VfdXJsOiBpcG9EYXRhLl9zb3VyY2VfdXJsIHx8IGlwb0RhdGEuc291cmNlX3VybCB8fCAnJyxcbiAgICBzY3JhcGVkX2F0OiBuZXcgRGF0ZShpcG9EYXRhLl9zY3JhcGVkX2F0IHx8IERhdGUubm93KCkpLFxuICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCksXG4gIH07XG5cbiAgLy8gUHJpb3JpdGl6ZSBkaXJlY3QgZGF0ZSBmaWVsZHMgZmlyc3QsIHRoZW4gY2hlY2sgaW4gbXVsdGlwbGUgcG9zc2libGUgbG9jYXRpb25zXG4gIHByb2Nlc3NlZERhdGEub3BlbmluZ19kYXRlID0gcGFyc2VEYXRlKFxuICAgIGlwb0RhdGEub3BlbmluZ19kYXRlIHx8IFxuICAgIGlwb0RhdGEuYmFzaWNEZXRhaWxzPy5pcG9PcGVuRGF0ZSB8fCBcbiAgICBpcG9EYXRhLmRhdGE/Lm9wZW5pbmdfZGF0ZSB8fCBcbiAgICBpcG9EYXRhLmRhdGE/Lmlzc3VlX29wZW5pbmdfZGF0ZSB8fFxuICAgIC8vIEV4dHJhY3QgZnJvbSBpcG9EYXRlIGZvcm1hdCBcIkphbnVhcnkgNywgMjAyNSB0byBKYW51YXJ5IDksIDIwMjVcIlxuICAgIChpcG9EYXRhLmJhc2ljRGV0YWlscz8uaXBvRGF0ZSA/IGlwb0RhdGEuYmFzaWNEZXRhaWxzLmlwb0RhdGUuc3BsaXQoJyB0byAnKVswXSA6IG51bGwpXG4gICk7XG4gIFxuICBwcm9jZXNzZWREYXRhLmNsb3NpbmdfZGF0ZSA9IHBhcnNlRGF0ZShcbiAgICBpcG9EYXRhLmNsb3NpbmdfZGF0ZSB8fCBcbiAgICBpcG9EYXRhLmJhc2ljRGV0YWlscz8uaXBvQ2xvc2VEYXRlIHx8IFxuICAgIGlwb0RhdGEuZGF0YT8uY2xvc2luZ19kYXRlIHx8IFxuICAgIGlwb0RhdGEuZGF0YT8uaXNzdWVfY2xvc2luZ19kYXRlIHx8XG4gICAgLy8gRXh0cmFjdCBmcm9tIGlwb0RhdGUgZm9ybWF0IFwiSmFudWFyeSA3LCAyMDI1IHRvIEphbnVhcnkgOSwgMjAyNVwiXG4gICAgKGlwb0RhdGEuYmFzaWNEZXRhaWxzPy5pcG9EYXRlID8gaXBvRGF0YS5iYXNpY0RldGFpbHMuaXBvRGF0ZS5zcGxpdCgnIHRvICcpWzFdIDogbnVsbClcbiAgKTtcbiAgXG4gIHByb2Nlc3NlZERhdGEubGlzdGluZ19kYXRlID0gcGFyc2VEYXRlKFxuICAgIGlwb0RhdGEubGlzdGluZ19kYXRlIHx8IFxuICAgIGlwb0RhdGEuYmFzaWNEZXRhaWxzPy5pcG9MaXN0aW5nRGF0ZSB8fCBcbiAgICBpcG9EYXRhLmRhdGE/Lmxpc3RpbmdfZGF0ZVxuICApO1xuXG4gIC8vIEV4dHJhY3Qgb3RoZXIga2V5IGZpZWxkc1xuICBwcm9jZXNzZWREYXRhLmlzc3VlX3ByaWNlID0gaXBvRGF0YS5iYXNpY0RldGFpbHM/Lmlzc3VlUHJpY2UgfHwgaXBvRGF0YS5kYXRhPy5pc3N1ZV9wcmljZSB8fCBpcG9EYXRhLmRhdGE/LnByaWNlX2JhbmQgfHwgaXBvRGF0YS5pc3N1ZV9wcmljZTtcbiAgcHJvY2Vzc2VkRGF0YS5pc3N1ZV9zaXplID0gaXBvRGF0YS5iYXNpY0RldGFpbHM/Lmlzc3VlU2l6ZSB8fCBpcG9EYXRhLmRhdGE/Lmlzc3VlX3NpemUgfHwgaXBvRGF0YS5kYXRhPy5pc3N1ZV9hbW91bnQgfHwgaXBvRGF0YS5pc3N1ZV9zaXplO1xuICBwcm9jZXNzZWREYXRhLmxvdF9zaXplID0gcGFyc2VJbnQoaXBvRGF0YS5iYXNpY0RldGFpbHM/LmxvdFNpemUgfHwgaXBvRGF0YS5kYXRhPy5sb3Rfc2l6ZSB8fCBpcG9EYXRhLmxvdF9zaXplIHx8ICcwJywgMTApIHx8IG51bGw7XG4gIHByb2Nlc3NlZERhdGEubG9nb191cmwgPSBpcG9EYXRhLmxvZ28gfHwgbnVsbDtcblxuICAvLyBFeHRyYWN0IG51bWVyaWMgdmFsdWVzIGZvciBwcmljZSBhbmQgc2l6ZSBmb3IgYWdncmVnYXRpb25cbiAgaWYgKHByb2Nlc3NlZERhdGEuaXNzdWVfcHJpY2UpIHtcbiAgICBjb25zdCBwcmljZU1hdGNoID0gcHJvY2Vzc2VkRGF0YS5pc3N1ZV9wcmljZS5tYXRjaCgvXFxkKyhcXC5cXGQrKT8vKTtcbiAgICBwcm9jZXNzZWREYXRhLmlzc3VlX3ByaWNlX251bWVyaWMgPSBwcmljZU1hdGNoID8gcGFyc2VGbG9hdChwcmljZU1hdGNoWzBdKSA6IG51bGw7XG4gIH1cbiAgXG4gIGlmIChwcm9jZXNzZWREYXRhLmlzc3VlX3NpemUpIHtcbiAgICBjb25zdCBzaXplTWF0Y2ggPSBwcm9jZXNzZWREYXRhLmlzc3VlX3NpemUubWF0Y2goL1xcZCsoXFwuXFxkKyk/Lyk7XG4gICAgcHJvY2Vzc2VkRGF0YS5pc3N1ZV9zaXplX251bWVyaWMgPSBzaXplTWF0Y2ggPyBwYXJzZUZsb2F0KHNpemVNYXRjaFswXSkgOiBudWxsO1xuICB9XG5cbiAgLy8gRXh0cmFjdCBsaXN0aW5nIGdhaW5zIHBlcmNlbnRhZ2UgZm9yIHBlcmZvcm1hbmNlIHRyYWNraW5nXG4gIGlmIChwcm9jZXNzZWREYXRhLmxpc3RpbmdfZ2FpbnMpIHtcbiAgICBjb25zdCBnYWluc01hdGNoID0gcHJvY2Vzc2VkRGF0YS5saXN0aW5nX2dhaW5zLm1hdGNoKC8oLT9cXGQrKFxcLlxcZCspPylcXHMqJS8pO1xuICAgIHByb2Nlc3NlZERhdGEubGlzdGluZ19nYWluc19udW1lcmljID0gZ2FpbnNNYXRjaCA/IHBhcnNlRmxvYXQoZ2FpbnNNYXRjaFsxXSkgOiBudWxsO1xuICB9IGVsc2UgaWYgKGlwb0RhdGEubGlzdGluZ0RheVRyYWRpbmcgJiYgaXBvRGF0YS5saXN0aW5nRGF5VHJhZGluZy5kYXRhKSB7XG4gICAgLy8gQ2FsY3VsYXRlIGxpc3RpbmcgZ2FpbnMgZnJvbSBsaXN0aW5nIGRheSB0cmFkaW5nIGRhdGFcbiAgICBjb25zdCBkYXRhID0gaXBvRGF0YS5saXN0aW5nRGF5VHJhZGluZy5kYXRhO1xuICAgIGNvbnN0IGV4Y2hhbmdlID0gT2JqZWN0LmtleXMoZGF0YS5maW5hbF9pc3N1ZV9wcmljZSB8fCB7fSlbMF07XG4gICAgXG4gICAgaWYgKGV4Y2hhbmdlICYmIGRhdGEuZmluYWxfaXNzdWVfcHJpY2VbZXhjaGFuZ2VdICYmIGRhdGEubGFzdF90cmFkZVtleGNoYW5nZV0pIHtcbiAgICAgIGNvbnN0IGlzc3VlUHJpY2UgPSBwYXJzZUZsb2F0KGRhdGEuZmluYWxfaXNzdWVfcHJpY2VbZXhjaGFuZ2VdKTtcbiAgICAgIGNvbnN0IGxhc3RUcmFkZVByaWNlID0gcGFyc2VGbG9hdChkYXRhLmxhc3RfdHJhZGVbZXhjaGFuZ2VdKTtcbiAgICAgIFxuICAgICAgaWYgKCFpc05hTihpc3N1ZVByaWNlKSAmJiAhaXNOYU4obGFzdFRyYWRlUHJpY2UpICYmIGlzc3VlUHJpY2UgPiAwKSB7XG4gICAgICAgIGNvbnN0IGxpc3RpbmdHYWluID0gKChsYXN0VHJhZGVQcmljZSAtIGlzc3VlUHJpY2UpIC8gaXNzdWVQcmljZSkgKiAxMDA7XG4gICAgICAgIHByb2Nlc3NlZERhdGEubGlzdGluZ19nYWlucyA9IGAke2xpc3RpbmdHYWluLnRvRml4ZWQoMil9JWA7XG4gICAgICAgIHByb2Nlc3NlZERhdGEubGlzdGluZ19nYWluc19udW1lcmljID0gcGFyc2VGbG9hdChsaXN0aW5nR2Fpbi50b0ZpeGVkKDIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBEZXRlcm1pbmUgc3RhdHVzIGJhc2VkIG9uIGRhdGVzXG4gIHByb2Nlc3NlZERhdGEuc3RhdHVzID0gZGV0ZXJtaW5lSXBvU3RhdHVzKHByb2Nlc3NlZERhdGEpO1xuXG4gIC8vIFVwc2VydCB0aGUgZG9jdW1lbnRcbiAgcmV0dXJuIHRoaXMuZmluZE9uZUFuZFVwZGF0ZShcbiAgICB7IGlwb19pZDogcHJvY2Vzc2VkRGF0YS5pcG9faWQgfSxcbiAgICBwcm9jZXNzZWREYXRhLFxuICAgIHsgXG4gICAgICB1cHNlcnQ6IHRydWUsIFxuICAgICAgbmV3OiB0cnVlLFxuICAgICAgc2V0RGVmYXVsdHNPbkluc2VydDogdHJ1ZVxuICAgIH1cbiAgKTtcbn07XG5cbi8vIEhlbHBlciB0byBwYXJzZSBkYXRlc1xuZnVuY3Rpb24gcGFyc2VEYXRlKGRhdGVTdHIpIHtcbiAgaWYgKCFkYXRlU3RyKSByZXR1cm4gbnVsbDtcbiAgXG4gIHRyeSB7XG4gICAgLy8gSGFuZGxlIGRpZmZlcmVudCBkYXRlIGZvcm1hdHNcbiAgICBpZiAodHlwZW9mIGRhdGVTdHIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBGb3JtYXQ6IFwiVHVlLCBKYW4gNywgMjAyNVwiXG4gICAgICBpZiAoZGF0ZVN0ci5pbmNsdWRlcygnLCcpKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlU3RyKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRm9ybWF0OiBcIkphbnVhcnkgNywgMjAyNVwiXG4gICAgICBjb25zdCBwYXJ0cyA9IGRhdGVTdHIuc3BsaXQoJyAnKTtcbiAgICAgIGlmIChwYXJ0cy5sZW5ndGggPj0gMykge1xuICAgICAgICAvLyBUcnkgdG8gcGFyc2UgYXMgaXMgZmlyc3RcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuICAgICAgICBpZiAoIWlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xuICAgICAgICAgIHJldHVybiBkYXRlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBUcnkgcGFyc2luZyB3aXRoIGp1c3QgbW9udGgsIGRheSwgeWVhclxuICAgICAgICBjb25zdCBtb250aEluZGV4ID0gW1xuICAgICAgICAgICdqYW51YXJ5JywgJ2ZlYnJ1YXJ5JywgJ21hcmNoJywgJ2FwcmlsJywgJ21heScsICdqdW5lJyxcbiAgICAgICAgICAnanVseScsICdhdWd1c3QnLCAnc2VwdGVtYmVyJywgJ29jdG9iZXInLCAnbm92ZW1iZXInLCAnZGVjZW1iZXInXG4gICAgICAgIF0uaW5kZXhPZihwYXJ0c1swXS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChtb250aEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIC8vIFBhcnNlIGRheSAocmVtb3ZlIGNvbW1hIGlmIHByZXNlbnQpXG4gICAgICAgICAgY29uc3QgZGF5ID0gcGFyc2VJbnQocGFydHNbMV0ucmVwbGFjZSgnLCcsICcnKSwgMTApO1xuICAgICAgICAgIC8vIFBhcnNlIHllYXJcbiAgICAgICAgICBjb25zdCB5ZWFyID0gcGFyc2VJbnQocGFydHNbcGFydHMubGVuZ3RoIC0gMV0sIDEwKTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGhJbmRleCwgZGF5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBEZWZhdWx0IHBhcnNpbmdcbiAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVN0cik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwYXJzaW5nIGRhdGU6ICR7ZGF0ZVN0cn1gLCBlKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vLyBEZXRlcm1pbmUgSVBPIHN0YXR1cyBiYXNlZCBvbiBkYXRlc1xuZnVuY3Rpb24gZGV0ZXJtaW5lSXBvU3RhdHVzKGlwbykge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICBcbiAgaWYgKCFpcG8ub3BlbmluZ19kYXRlKSByZXR1cm4gJ3VwY29taW5nJztcbiAgXG4gIGlmIChpcG8ubGlzdGluZ19kYXRlICYmIG5vdyA+PSBpcG8ubGlzdGluZ19kYXRlKSByZXR1cm4gJ2xpc3RlZCc7XG4gIGlmIChpcG8uY2xvc2luZ19kYXRlICYmIG5vdyA+PSBpcG8uY2xvc2luZ19kYXRlKSByZXR1cm4gJ2Nsb3NlZCc7XG4gIGlmIChub3cgPj0gaXBvLm9wZW5pbmdfZGF0ZSkgcmV0dXJuICdvcGVuJztcbiAgXG4gIHJldHVybiAndXBjb21pbmcnO1xufVxuXG4vLyBDaGVjayBpZiB0aGUgbW9kZWwgYWxyZWFkeSBleGlzdHMgdG8gcHJldmVudCBcIk92ZXJ3cml0ZU1vZGVsRXJyb3JcIlxuY29uc3QgSXBvTW9kZWwgPSBtb25nb29zZS5tb2RlbHMuSXBvIHx8IG1vbmdvb3NlLm1vZGVsKCdJcG8nLCBpcG9TY2hlbWEpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IElwb01vZGVsOyAiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiaXBvU2NoZW1hIiwiU2NoZW1hIiwiaXBvX2lkIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwiaW5kZXgiLCJpcG9JZCIsInNlbGVjdCIsImlwb19uYW1lIiwieWVhciIsIk51bWJlciIsImNvbXBhbnlfbmFtZSIsInNvdXJjZV91cmwiLCJkYXRhIiwiT2JqZWN0Iiwib3BlbmluZ19kYXRlIiwiRGF0ZSIsImNsb3NpbmdfZGF0ZSIsImxpc3RpbmdfZGF0ZSIsImlzc3VlX3ByaWNlIiwiaXNzdWVfcHJpY2VfbnVtZXJpYyIsImlzc3VlX3NpemUiLCJpc3N1ZV9zaXplX251bWVyaWMiLCJsb3Rfc2l6ZSIsImFsbG90bWVudF9zdGF0dXMiLCJsaXN0aW5nX2dhaW5zIiwibGlzdGluZ19nYWluc19udW1lcmljIiwic3RhdHVzIiwiZW51bSIsImRlZmF1bHQiLCJzY3JhcGVkX2F0Iiwibm93IiwidXBkYXRlZF9hdCIsInJhd19kYXRhIiwibG9nb191cmwiLCJ0aW1lc3RhbXBzIiwic3RyaWN0IiwicHJlIiwibmV4dCIsInNhbml0aXplZE5hbWUiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJFcnJvciIsInVuZGVmaW5lZCIsInN0YXRpY3MiLCJ1cHNlcnRJcG8iLCJpcG9EYXRhIiwibmFtZSIsInByb2Nlc3NlZERhdGEiLCJtZXRhZGF0YSIsImdldEZ1bGxZZWFyIiwiX3NvdXJjZV91cmwiLCJfc2NyYXBlZF9hdCIsInBhcnNlRGF0ZSIsImJhc2ljRGV0YWlscyIsImlwb09wZW5EYXRlIiwiaXNzdWVfb3BlbmluZ19kYXRlIiwiaXBvRGF0ZSIsInNwbGl0IiwiaXBvQ2xvc2VEYXRlIiwiaXNzdWVfY2xvc2luZ19kYXRlIiwiaXBvTGlzdGluZ0RhdGUiLCJpc3N1ZVByaWNlIiwicHJpY2VfYmFuZCIsImlzc3VlU2l6ZSIsImlzc3VlX2Ftb3VudCIsInBhcnNlSW50IiwibG90U2l6ZSIsImxvZ28iLCJwcmljZU1hdGNoIiwibWF0Y2giLCJwYXJzZUZsb2F0Iiwic2l6ZU1hdGNoIiwiZ2FpbnNNYXRjaCIsImxpc3RpbmdEYXlUcmFkaW5nIiwiZXhjaGFuZ2UiLCJrZXlzIiwiZmluYWxfaXNzdWVfcHJpY2UiLCJsYXN0X3RyYWRlIiwibGFzdFRyYWRlUHJpY2UiLCJpc05hTiIsImxpc3RpbmdHYWluIiwidG9GaXhlZCIsImRldGVybWluZUlwb1N0YXR1cyIsImZpbmRPbmVBbmRVcGRhdGUiLCJ1cHNlcnQiLCJuZXciLCJzZXREZWZhdWx0c09uSW5zZXJ0IiwiZGF0ZVN0ciIsImluY2x1ZGVzIiwicGFydHMiLCJsZW5ndGgiLCJkYXRlIiwiZ2V0VGltZSIsIm1vbnRoSW5kZXgiLCJpbmRleE9mIiwiZGF5IiwiZSIsImNvbnNvbGUiLCJlcnJvciIsImlwbyIsIklwb01vZGVsIiwibW9kZWxzIiwiSXBvIiwibW9kZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/IpoModel.js\n");

/***/ }),

/***/ "(api)/./pages/api/ipos/index.js":
/*!*********************************!*\
  !*** ./pages/api/ipos/index.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config/database */ \"(api)/./config/database.js\");\n/* harmony import */ var _config_database__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_config_database__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _models_IpoModel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/IpoModel */ \"(api)/./models/IpoModel.js\");\n/* harmony import */ var _models_IpoModel__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_models_IpoModel__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_cache__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/cache */ \"(api)/./pages/api/utils/cache.js\");\n\n\n\n// Main handler for IPO listing\nconst handler = async (req, res)=>{\n    switch(req.method){\n        case \"GET\":\n            return getIpos(req, res);\n        default:\n            return res.status(405).json({\n                error: \"Method not allowed\"\n            });\n    }\n};\n// Get all IPOs with pagination, sorting, and filtering\nconst getIpos = async (req, res)=>{\n    try {\n        // Ensure database connection\n        await (0,_config_database__WEBPACK_IMPORTED_MODULE_0__.connectToDatabase)();\n        // Parse query parameters\n        const page = parseInt(req.query.page || \"1\", 10);\n        const limit = parseInt(req.query.limit || \"10\", 10);\n        const sort = req.query.sort || \"-opening_date\"; // Default sort by opening date desc\n        const skip = (page - 1) * limit;\n        // Build filter based on query parameters\n        const filter = {};\n        // Add year filter if provided\n        if (req.query.year) {\n            filter.year = parseInt(req.query.year, 10);\n        }\n        // Add status filter if provided\n        if (req.query.status) {\n            filter.status = req.query.status;\n        }\n        // Add price range filter if provided\n        if (req.query.minPrice || req.query.maxPrice) {\n            filter.issue_price_numeric = {};\n            if (req.query.minPrice) {\n                filter.issue_price_numeric.$gte = parseFloat(req.query.minPrice);\n            }\n            if (req.query.maxPrice) {\n                filter.issue_price_numeric.$lte = parseFloat(req.query.maxPrice);\n            }\n        }\n        // Create array of promises for parallel execution\n        const [ipos, total] = await Promise.all([\n            _models_IpoModel__WEBPACK_IMPORTED_MODULE_1___default().find(filter).sort(sort).skip(skip).limit(limit).select(\"ipo_id ipo_name company_name year opening_date closing_date listing_date issue_price status logo_url\").lean(),\n            _models_IpoModel__WEBPACK_IMPORTED_MODULE_1___default().countDocuments(filter)\n        ]);\n        // Check if we have results\n        if (total === 0) {\n            return res.status(200).json({\n                data: [],\n                page,\n                limit,\n                total: 0,\n                totalPages: 0,\n                message: \"No IPOs found matching the criteria\"\n            });\n        }\n        // Return paginated results\n        return res.status(200).json({\n            data: ipos || [],\n            page,\n            limit,\n            total,\n            totalPages: Math.ceil(total / limit)\n        });\n    } catch (error) {\n        console.error(\"Error fetching IPOs:\", error);\n        return res.status(500).json({\n            error: \"Failed to fetch IPOs\"\n        });\n    }\n};\n// Export the handler with cache middleware (1 minute cache)\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_utils_cache__WEBPACK_IMPORTED_MODULE_2__.withCache)(handler, 60));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFlUix1REFBU0EsQ0FBQ0MsU0FBUyxHQUFHLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pcG8tc2NyYXBlci8uL3BhZ2VzL2FwaS9pcG9zL2luZGV4LmpzP2I1YWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29ubmVjdFRvRGF0YWJhc2UgfSBmcm9tICcuLi8uLi8uLi9jb25maWcvZGF0YWJhc2UnO1xuaW1wb3J0IElwb01vZGVsIGZyb20gJy4uLy4uLy4uL21vZGVscy9JcG9Nb2RlbCc7XG5pbXBvcnQgeyB3aXRoQ2FjaGUgfSBmcm9tICcuLi91dGlscy9jYWNoZSc7XG5cbi8vIE1haW4gaGFuZGxlciBmb3IgSVBPIGxpc3RpbmdcbmNvbnN0IGhhbmRsZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgc3dpdGNoIChyZXEubWV0aG9kKSB7XG4gICAgY2FzZSAnR0VUJzpcbiAgICAgIHJldHVybiBnZXRJcG9zKHJlcSwgcmVzKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG59O1xuXG4vLyBHZXQgYWxsIElQT3Mgd2l0aCBwYWdpbmF0aW9uLCBzb3J0aW5nLCBhbmQgZmlsdGVyaW5nXG5jb25zdCBnZXRJcG9zID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gRW5zdXJlIGRhdGFiYXNlIGNvbm5lY3Rpb25cbiAgICBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xuICAgIFxuICAgIC8vIFBhcnNlIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UgfHwgJzEnLCAxMCk7XG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQgfHwgJzEwJywgMTApO1xuICAgIGNvbnN0IHNvcnQgPSByZXEucXVlcnkuc29ydCB8fCAnLW9wZW5pbmdfZGF0ZSc7IC8vIERlZmF1bHQgc29ydCBieSBvcGVuaW5nIGRhdGUgZGVzY1xuICAgIGNvbnN0IHNraXAgPSAocGFnZSAtIDEpICogbGltaXQ7XG4gICAgXG4gICAgLy8gQnVpbGQgZmlsdGVyIGJhc2VkIG9uIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICBjb25zdCBmaWx0ZXIgPSB7fTtcbiAgICBcbiAgICAvLyBBZGQgeWVhciBmaWx0ZXIgaWYgcHJvdmlkZWRcbiAgICBpZiAocmVxLnF1ZXJ5LnllYXIpIHtcbiAgICAgIGZpbHRlci55ZWFyID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnllYXIsIDEwKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIHN0YXR1cyBmaWx0ZXIgaWYgcHJvdmlkZWRcbiAgICBpZiAocmVxLnF1ZXJ5LnN0YXR1cykge1xuICAgICAgZmlsdGVyLnN0YXR1cyA9IHJlcS5xdWVyeS5zdGF0dXM7XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCBwcmljZSByYW5nZSBmaWx0ZXIgaWYgcHJvdmlkZWRcbiAgICBpZiAocmVxLnF1ZXJ5Lm1pblByaWNlIHx8IHJlcS5xdWVyeS5tYXhQcmljZSkge1xuICAgICAgZmlsdGVyLmlzc3VlX3ByaWNlX251bWVyaWMgPSB7fTtcbiAgICAgIGlmIChyZXEucXVlcnkubWluUHJpY2UpIHtcbiAgICAgICAgZmlsdGVyLmlzc3VlX3ByaWNlX251bWVyaWMuJGd0ZSA9IHBhcnNlRmxvYXQocmVxLnF1ZXJ5Lm1pblByaWNlKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXEucXVlcnkubWF4UHJpY2UpIHtcbiAgICAgICAgZmlsdGVyLmlzc3VlX3ByaWNlX251bWVyaWMuJGx0ZSA9IHBhcnNlRmxvYXQocmVxLnF1ZXJ5Lm1heFByaWNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIGFycmF5IG9mIHByb21pc2VzIGZvciBwYXJhbGxlbCBleGVjdXRpb25cbiAgICBjb25zdCBbaXBvcywgdG90YWxdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgSXBvTW9kZWwuZmluZChmaWx0ZXIpXG4gICAgICAgIC5zb3J0KHNvcnQpXG4gICAgICAgIC5za2lwKHNraXApXG4gICAgICAgIC5saW1pdChsaW1pdClcbiAgICAgICAgLnNlbGVjdCgnaXBvX2lkIGlwb19uYW1lIGNvbXBhbnlfbmFtZSB5ZWFyIG9wZW5pbmdfZGF0ZSBjbG9zaW5nX2RhdGUgbGlzdGluZ19kYXRlIGlzc3VlX3ByaWNlIHN0YXR1cyBsb2dvX3VybCcpXG4gICAgICAgIC5sZWFuKCksIC8vIFVzZSBsZWFuIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICAgIFxuICAgICAgSXBvTW9kZWwuY291bnREb2N1bWVudHMoZmlsdGVyKVxuICAgIF0pO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgcmVzdWx0c1xuICAgIGlmICh0b3RhbCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIHBhZ2UsXG4gICAgICAgIGxpbWl0LFxuICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgdG90YWxQYWdlczogMCxcbiAgICAgICAgbWVzc2FnZTogJ05vIElQT3MgZm91bmQgbWF0Y2hpbmcgdGhlIGNyaXRlcmlhJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJldHVybiBwYWdpbmF0ZWQgcmVzdWx0c1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBkYXRhOiBpcG9zIHx8IFtdLFxuICAgICAgcGFnZSxcbiAgICAgIGxpbWl0LFxuICAgICAgdG90YWwsXG4gICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdClcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBJUE9zOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBJUE9zJyB9KTtcbiAgfVxufTtcblxuLy8gRXhwb3J0IHRoZSBoYW5kbGVyIHdpdGggY2FjaGUgbWlkZGxld2FyZSAoMSBtaW51dGUgY2FjaGUpXG5leHBvcnQgZGVmYXVsdCB3aXRoQ2FjaGUoaGFuZGxlciwgNjApOyAiXSwibmFtZXMiOlsiY29ubmVjdFRvRGF0YWJhc2UiLCJJcG9Nb2RlbCIsIndpdGhDYWNoZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJnZXRJcG9zIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwicGFnZSIsInBhcnNlSW50IiwicXVlcnkiLCJsaW1pdCIsInNvcnQiLCJza2lwIiwiZmlsdGVyIiwieWVhciIsIm1pblByaWNlIiwibWF4UHJpY2UiLCJpc3N1ZV9wcmljZV9udW1lcmljIiwiJGd0ZSIsInBhcnNlRmxvYXQiLCIkbHRlIiwiaXBvcyIsInRvdGFsIiwiUHJvbWlzZSIsImFsbCIsImZpbmQiLCJzZWxlY3QiLCJsZWFuIiwiY291bnREb2N1bWVudHMiLCJkYXRhIiwidG90YWxQYWdlcyIsIm1lc3NhZ2UiLCJNYXRoIiwiY2VpbCIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/ipos/index.js\n");

/***/ }),

/***/ "(api)/./pages/api/utils/cache.js":
/*!**********************************!*\
  !*** ./pages/api/utils/cache.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearCacheKey: () => (/* binding */ clearCacheKey),\n/* harmony export */   createProjection: () => (/* binding */ createProjection),\n/* harmony export */   getCachedData: () => (/* binding */ getCachedData),\n/* harmony export */   setCachedData: () => (/* binding */ setCachedData),\n/* harmony export */   withCache: () => (/* binding */ withCache)\n/* harmony export */ });\n/* harmony import */ var v8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! v8 */ \"v8\");\n/* harmony import */ var v8__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(v8__WEBPACK_IMPORTED_MODULE_0__);\n\n// In-memory cache for development/small deployments\nconst memoryCache = new Map();\n/**\n * Check if Redis is available\n * @returns {boolean} - Whether Redis is available\n */ const isRedisAvailable = ()=>{\n    return process.env.REDIS_URL && process.env.USE_REDIS === \"true\";\n};\n/**\n * Get Redis client\n * @returns {Object|null} - Redis client or null\n */ const getRedisClient = async ()=>{\n    if (!isRedisAvailable()) return null;\n    try {\n        // Dynamic import to avoid requiring Redis in environments where it's not used\n        const { createClient } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! redis */ \"redis\", 23));\n        const client = createClient({\n            url: process.env.REDIS_URL\n        });\n        await client.connect();\n        return client;\n    } catch (error) {\n        console.error(\"Redis connection error:\", error);\n        return null;\n    }\n};\n/**\n * Get data from cache\n * @param {string} key - Cache key\n * @param {number} ttl - Time to live in seconds\n * @returns {Promise<Object|null>} - Cached data or null\n */ const getCachedData = async (key, ttl = 300)=>{\n    // Try Redis first if available\n    if (isRedisAvailable()) {\n        try {\n            const client = await getRedisClient();\n            if (!client) return null;\n            const data = await client.get(key);\n            await client.quit();\n            if (data) {\n                console.log(`Cache hit for key: ${key}`);\n                return JSON.parse(data);\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Redis get error:\", error);\n        // Fall back to memory cache if Redis fails\n        }\n    }\n    // Memory cache fallback\n    const cachedItem = memoryCache.get(key);\n    if (cachedItem && cachedItem.expiry > Date.now()) {\n        console.log(`Memory cache hit for key: ${key}`);\n        return cachedItem.data;\n    }\n    return null;\n};\n/**\n * Set data in cache\n * @param {string} key - Cache key\n * @param {Object} data - Data to cache\n * @param {number} ttl - Time to live in seconds\n * @returns {Promise<boolean>} - Whether cache was set\n */ const setCachedData = async (key, data, ttl = 300)=>{\n    // Try Redis first if available\n    if (isRedisAvailable()) {\n        try {\n            const client = await getRedisClient();\n            if (!client) return false;\n            await client.setEx(key, ttl, JSON.stringify(data));\n            await client.quit();\n            return true;\n        } catch (error) {\n            console.error(\"Redis set error:\", error);\n        // Fall back to memory cache if Redis fails\n        }\n    }\n    // Memory cache fallback\n    memoryCache.set(key, {\n        data,\n        expiry: Date.now() + ttl * 1000\n    });\n    // Clean up expired items occasionally\n    if (Math.random() < 0.1) {\n        for (const [k, v] of memoryCache.entries()){\n            if (v.expiry < Date.now()) {\n                memoryCache.delete(k);\n            }\n        }\n    }\n    return true;\n};\n/**\n * Clear cache for a specific key\n * @param {string} key - Cache key\n * @returns {Promise<boolean>} - Whether cache was cleared\n */ const clearCacheKey = async (key)=>{\n    // Try Redis first if available\n    if (isRedisAvailable()) {\n        try {\n            const client = await getRedisClient();\n            if (!client) return false;\n            await client.del(key);\n            await client.quit();\n            return true;\n        } catch (error) {\n            console.error(\"Redis delete error:\", error);\n        }\n    }\n    // Memory cache fallback\n    memoryCache.delete(key);\n    return true;\n};\n/**\n * Cache middleware for API handlers\n * @param {Function} handler - API handler\n * @param {number} ttl - Time to live in seconds (default: 60)\n * @returns {Function} - Cached API handler\n */ const withCache = (handler, ttl = 60)=>async (req, res)=>{\n        // Set cache control headers\n        const cacheSeconds = parseInt(\"60\" || 0, 10);\n        res.setHeader(\"Cache-Control\", `public, s-maxage=${cacheSeconds}, stale-while-revalidate=${cacheSeconds * 2}`);\n        return handler(req, res);\n    };\n/**\n * Create a query projection object from requested sections\n * @param {string|string[]} sections - Sections to include\n * @returns {Object} - Projection object\n */ const createProjection = (sections)=>{\n    if (!sections) return {};\n    const projection = {};\n    // Handle array of sections\n    if (Array.isArray(sections)) {\n        sections.forEach((section)=>{\n            projection[section] = 1;\n        });\n        // Always include ipo_id, year and company_name\n        projection.ipo_id = 1;\n        projection.year = 1;\n        projection.company_name = 1;\n        return projection;\n    }\n    // Handle comma-separated string\n    if (typeof sections === \"string\") {\n        sections.split(\",\").forEach((section)=>{\n            projection[section.trim()] = 1;\n        });\n        // Always include ipo_id, year and company_name\n        projection.ipo_id = 1;\n        projection.year = 1;\n        projection.company_name = 1;\n        return projection;\n    }\n    return {};\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ0ksUUFBUUssSUFBSSxHQUFHLEdBQUc7UUFDL0I7UUFDQSwrQ0FBK0M7UUFDL0NULFdBQVdLLE1BQU0sR0FBRztRQUNwQkwsV0FBV00sSUFBSSxHQUFHO1FBQ2xCTixXQUFXTyxZQUFZLEdBQUc7UUFDMUIsT0FBT1A7SUFDVDtJQUVBLE9BQU8sQ0FBQztBQUNWLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pcG8tc2NyYXBlci8uL3BhZ2VzL2FwaS91dGlscy9jYWNoZS5qcz83NjM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlcmlhbGl6ZSwgZGVzZXJpYWxpemUgfSBmcm9tICd2OCc7XG5cbi8vIEluLW1lbW9yeSBjYWNoZSBmb3IgZGV2ZWxvcG1lbnQvc21hbGwgZGVwbG95bWVudHNcbmNvbnN0IG1lbW9yeUNhY2hlID0gbmV3IE1hcCgpO1xuXG4vKipcbiAqIENoZWNrIGlmIFJlZGlzIGlzIGF2YWlsYWJsZVxuICogQHJldHVybnMge2Jvb2xlYW59IC0gV2hldGhlciBSZWRpcyBpcyBhdmFpbGFibGVcbiAqL1xuY29uc3QgaXNSZWRpc0F2YWlsYWJsZSA9ICgpID0+IHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52LlJFRElTX1VSTCAmJiBwcm9jZXNzLmVudi5VU0VfUkVESVMgPT09ICd0cnVlJztcbn07XG5cbi8qKlxuICogR2V0IFJlZGlzIGNsaWVudFxuICogQHJldHVybnMge09iamVjdHxudWxsfSAtIFJlZGlzIGNsaWVudCBvciBudWxsXG4gKi9cbmNvbnN0IGdldFJlZGlzQ2xpZW50ID0gYXN5bmMgKCkgPT4ge1xuICBpZiAoIWlzUmVkaXNBdmFpbGFibGUoKSkgcmV0dXJuIG51bGw7XG4gIFxuICB0cnkge1xuICAgIC8vIER5bmFtaWMgaW1wb3J0IHRvIGF2b2lkIHJlcXVpcmluZyBSZWRpcyBpbiBlbnZpcm9ubWVudHMgd2hlcmUgaXQncyBub3QgdXNlZFxuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJ3JlZGlzJyk7XG4gICAgY29uc3QgY2xpZW50ID0gY3JlYXRlQ2xpZW50KHtcbiAgICAgIHVybDogcHJvY2Vzcy5lbnYuUkVESVNfVVJMXG4gICAgfSk7XG4gICAgXG4gICAgYXdhaXQgY2xpZW50LmNvbm5lY3QoKTtcbiAgICByZXR1cm4gY2xpZW50O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1JlZGlzIGNvbm5lY3Rpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIEdldCBkYXRhIGZyb20gY2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBDYWNoZSBrZXlcbiAqIEBwYXJhbSB7bnVtYmVyfSB0dGwgLSBUaW1lIHRvIGxpdmUgaW4gc2Vjb25kc1xuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fSAtIENhY2hlZCBkYXRhIG9yIG51bGxcbiAqL1xuZXhwb3J0IGNvbnN0IGdldENhY2hlZERhdGEgPSBhc3luYyAoa2V5LCB0dGwgPSAzMDApID0+IHtcbiAgLy8gVHJ5IFJlZGlzIGZpcnN0IGlmIGF2YWlsYWJsZVxuICBpZiAoaXNSZWRpc0F2YWlsYWJsZSgpKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldFJlZGlzQ2xpZW50KCk7XG4gICAgICBpZiAoIWNsaWVudCkgcmV0dXJuIG51bGw7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjbGllbnQuZ2V0KGtleSk7XG4gICAgICBhd2FpdCBjbGllbnQucXVpdCgpO1xuICAgICAgXG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZyhgQ2FjaGUgaGl0IGZvciBrZXk6ICR7a2V5fWApO1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1JlZGlzIGdldCBlcnJvcjonLCBlcnJvcik7XG4gICAgICAvLyBGYWxsIGJhY2sgdG8gbWVtb3J5IGNhY2hlIGlmIFJlZGlzIGZhaWxzXG4gICAgfVxuICB9XG4gIFxuICAvLyBNZW1vcnkgY2FjaGUgZmFsbGJhY2tcbiAgY29uc3QgY2FjaGVkSXRlbSA9IG1lbW9yeUNhY2hlLmdldChrZXkpO1xuICBcbiAgaWYgKGNhY2hlZEl0ZW0gJiYgY2FjaGVkSXRlbS5leHBpcnkgPiBEYXRlLm5vdygpKSB7XG4gICAgY29uc29sZS5sb2coYE1lbW9yeSBjYWNoZSBoaXQgZm9yIGtleTogJHtrZXl9YCk7XG4gICAgcmV0dXJuIGNhY2hlZEl0ZW0uZGF0YTtcbiAgfVxuICBcbiAgcmV0dXJuIG51bGw7XG59O1xuXG4vKipcbiAqIFNldCBkYXRhIGluIGNhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gQ2FjaGUga2V5XG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YSAtIERhdGEgdG8gY2FjaGVcbiAqIEBwYXJhbSB7bnVtYmVyfSB0dGwgLSBUaW1lIHRvIGxpdmUgaW4gc2Vjb25kc1xuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IC0gV2hldGhlciBjYWNoZSB3YXMgc2V0XG4gKi9cbmV4cG9ydCBjb25zdCBzZXRDYWNoZWREYXRhID0gYXN5bmMgKGtleSwgZGF0YSwgdHRsID0gMzAwKSA9PiB7XG4gIC8vIFRyeSBSZWRpcyBmaXJzdCBpZiBhdmFpbGFibGVcbiAgaWYgKGlzUmVkaXNBdmFpbGFibGUoKSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRSZWRpc0NsaWVudCgpO1xuICAgICAgaWYgKCFjbGllbnQpIHJldHVybiBmYWxzZTtcbiAgICAgIFxuICAgICAgYXdhaXQgY2xpZW50LnNldEV4KGtleSwgdHRsLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICBhd2FpdCBjbGllbnQucXVpdCgpO1xuICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignUmVkaXMgc2V0IGVycm9yOicsIGVycm9yKTtcbiAgICAgIC8vIEZhbGwgYmFjayB0byBtZW1vcnkgY2FjaGUgaWYgUmVkaXMgZmFpbHNcbiAgICB9XG4gIH1cbiAgXG4gIC8vIE1lbW9yeSBjYWNoZSBmYWxsYmFja1xuICBtZW1vcnlDYWNoZS5zZXQoa2V5LCB7XG4gICAgZGF0YSxcbiAgICBleHBpcnk6IERhdGUubm93KCkgKyAodHRsICogMTAwMClcbiAgfSk7XG4gIFxuICAvLyBDbGVhbiB1cCBleHBpcmVkIGl0ZW1zIG9jY2FzaW9uYWxseVxuICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMSkge1xuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIG1lbW9yeUNhY2hlLmVudHJpZXMoKSkge1xuICAgICAgaWYgKHYuZXhwaXJ5IDwgRGF0ZS5ub3coKSkge1xuICAgICAgICBtZW1vcnlDYWNoZS5kZWxldGUoayk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQ2xlYXIgY2FjaGUgZm9yIGEgc3BlY2lmaWMga2V5XG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gQ2FjaGUga2V5XG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSBXaGV0aGVyIGNhY2hlIHdhcyBjbGVhcmVkXG4gKi9cbmV4cG9ydCBjb25zdCBjbGVhckNhY2hlS2V5ID0gYXN5bmMgKGtleSkgPT4ge1xuICAvLyBUcnkgUmVkaXMgZmlyc3QgaWYgYXZhaWxhYmxlXG4gIGlmIChpc1JlZGlzQXZhaWxhYmxlKCkpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0UmVkaXNDbGllbnQoKTtcbiAgICAgIGlmICghY2xpZW50KSByZXR1cm4gZmFsc2U7XG4gICAgICBcbiAgICAgIGF3YWl0IGNsaWVudC5kZWwoa2V5KTtcbiAgICAgIGF3YWl0IGNsaWVudC5xdWl0KCk7XG4gICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdSZWRpcyBkZWxldGUgZXJyb3I6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gTWVtb3J5IGNhY2hlIGZhbGxiYWNrXG4gIG1lbW9yeUNhY2hlLmRlbGV0ZShrZXkpO1xuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQ2FjaGUgbWlkZGxld2FyZSBmb3IgQVBJIGhhbmRsZXJzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIC0gQVBJIGhhbmRsZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSB0dGwgLSBUaW1lIHRvIGxpdmUgaW4gc2Vjb25kcyAoZGVmYXVsdDogNjApXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IC0gQ2FjaGVkIEFQSSBoYW5kbGVyXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoQ2FjaGUgPSAoaGFuZGxlciwgdHRsID0gNjApID0+IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBTZXQgY2FjaGUgY29udHJvbCBoZWFkZXJzXG4gIGNvbnN0IGNhY2hlU2Vjb25kcyA9IHBhcnNlSW50KHByb2Nlc3MuZW52LkFQSV9DQUNIRV9USU1FIHx8IFN0cmluZyh0dGwpLCAxMCk7XG4gIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCBgcHVibGljLCBzLW1heGFnZT0ke2NhY2hlU2Vjb25kc30sIHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9JHtjYWNoZVNlY29uZHMgKiAyfWApO1xuICBcbiAgcmV0dXJuIGhhbmRsZXIocmVxLCByZXMpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBxdWVyeSBwcm9qZWN0aW9uIG9iamVjdCBmcm9tIHJlcXVlc3RlZCBzZWN0aW9uc1xuICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IHNlY3Rpb25zIC0gU2VjdGlvbnMgdG8gaW5jbHVkZVxuICogQHJldHVybnMge09iamVjdH0gLSBQcm9qZWN0aW9uIG9iamVjdFxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlUHJvamVjdGlvbiA9IChzZWN0aW9ucykgPT4ge1xuICBpZiAoIXNlY3Rpb25zKSByZXR1cm4ge307XG4gIFxuICBjb25zdCBwcm9qZWN0aW9uID0ge307XG4gIFxuICAvLyBIYW5kbGUgYXJyYXkgb2Ygc2VjdGlvbnNcbiAgaWYgKEFycmF5LmlzQXJyYXkoc2VjdGlvbnMpKSB7XG4gICAgc2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcbiAgICAgIHByb2plY3Rpb25bc2VjdGlvbl0gPSAxO1xuICAgIH0pO1xuICAgIC8vIEFsd2F5cyBpbmNsdWRlIGlwb19pZCwgeWVhciBhbmQgY29tcGFueV9uYW1lXG4gICAgcHJvamVjdGlvbi5pcG9faWQgPSAxO1xuICAgIHByb2plY3Rpb24ueWVhciA9IDE7XG4gICAgcHJvamVjdGlvbi5jb21wYW55X25hbWUgPSAxO1xuICAgIHJldHVybiBwcm9qZWN0aW9uO1xuICB9XG4gIFxuICAvLyBIYW5kbGUgY29tbWEtc2VwYXJhdGVkIHN0cmluZ1xuICBpZiAodHlwZW9mIHNlY3Rpb25zID09PSAnc3RyaW5nJykge1xuICAgIHNlY3Rpb25zLnNwbGl0KCcsJykuZm9yRWFjaChzZWN0aW9uID0+IHtcbiAgICAgIHByb2plY3Rpb25bc2VjdGlvbi50cmltKCldID0gMTtcbiAgICB9KTtcbiAgICAvLyBBbHdheXMgaW5jbHVkZSBpcG9faWQsIHllYXIgYW5kIGNvbXBhbnlfbmFtZVxuICAgIHByb2plY3Rpb24uaXBvX2lkID0gMTtcbiAgICBwcm9qZWN0aW9uLnllYXIgPSAxO1xuICAgIHByb2plY3Rpb24uY29tcGFueV9uYW1lID0gMTtcbiAgICByZXR1cm4gcHJvamVjdGlvbjtcbiAgfVxuICBcbiAgcmV0dXJuIHt9O1xufTsgIl0sIm5hbWVzIjpbInNlcmlhbGl6ZSIsImRlc2VyaWFsaXplIiwibWVtb3J5Q2FjaGUiLCJNYXAiLCJpc1JlZGlzQXZhaWxhYmxlIiwicHJvY2VzcyIsImVudiIsIlJFRElTX1VSTCIsIlVTRV9SRURJUyIsImdldFJlZGlzQ2xpZW50IiwiY3JlYXRlQ2xpZW50IiwiY2xpZW50IiwidXJsIiwiY29ubmVjdCIsImVycm9yIiwiY29uc29sZSIsImdldENhY2hlZERhdGEiLCJrZXkiLCJ0dGwiLCJkYXRhIiwiZ2V0IiwicXVpdCIsImxvZyIsIkpTT04iLCJwYXJzZSIsImNhY2hlZEl0ZW0iLCJleHBpcnkiLCJEYXRlIiwibm93Iiwic2V0Q2FjaGVkRGF0YSIsInNldEV4Iiwic3RyaW5naWZ5Iiwic2V0IiwiTWF0aCIsInJhbmRvbSIsImsiLCJ2IiwiZW50cmllcyIsImRlbGV0ZSIsImNsZWFyQ2FjaGVLZXkiLCJkZWwiLCJ3aXRoQ2FjaGUiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY2FjaGVTZWNvbmRzIiwicGFyc2VJbnQiLCJBUElfQ0FDSEVfVElNRSIsIlN0cmluZyIsInNldEhlYWRlciIsImNyZWF0ZVByb2plY3Rpb24iLCJzZWN0aW9ucyIsInByb2plY3Rpb24iLCJBcnJheSIsImlzQXJyYXkiLCJmb3JFYWNoIiwic2VjdGlvbiIsImlwb19pZCIsInllYXIiLCJjb21wYW55X25hbWUiLCJzcGxpdCIsInRyaW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/utils/cache.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fipos&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fipos%2Findex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();